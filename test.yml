- hosts: all
  gather_facts: yes
  roles:

- hosts: dummy
  roles:
    - dummy

- hosts: routers
  roles:
    - forward

- hosts: r0
  vars:
  - interfaces: 
    - {device: "eth2.2", ip: "10.2.2.1", net: 10.2.2.0, prefix: 24, vlan: 2, area: 0 }
  roles:
  - networking
  - bird

- hosts: r1
  vars:
  - interfaces: 
    - {device: "eth2.2", ip: "10.2.2.254", net: 10.2.2.0, prefix: 24, vlan: 2, area: 0 }
    - {device: "eth3.4", ip: "10.4.4.254", net: 10.4.4.0, prefix: 24, vlan: 4, area: 1 }
  roles:
  - networking
  - bird

- hosts: be1
  vars:
  - interfaces:
    - {device: "eth2.4", ip: "10.4.4.10", net: 10.4.4.0, prefix: 24, vlan: 4, area: 1 }
    - {device: "dummy0", ip: "10.99.99.1", net: 10.99.99.0, prefix: 24, area: 1 }

  roles:
  - networking
  - bird

- hosts: be2
  vars:
  - interfaces:
    - {device: "eth2.4", ip: "10.4.4.20", net: 10.4.4.0, prefix: 24, vlan: 4, area: 1 }
    - {device: "dummy0", ip: "10.99.99.1", net: 10.99.99.0, prefix: 24, area: 1 }
  roles:
  - networking
  - bird


